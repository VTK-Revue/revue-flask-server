{% extends "admin_base.html" %}

{% block page_content %}

<h2>Registrations</h2>
<table class="table table-striped table-condensed">
    <tr>
        <th>Username</th>
        <th>Email</th>
        <th>First name</th>
        <th>Last name</th>
        <th>Activate</th>
        <th>Remove</th>
    </tr>
    {% for registration in registrations %}
    <tr>
        <td>{{ registration.username }}</td>
        <td>{% if registration.email() %}{{ registration.email().address }}{% endif %}</td>
        <td>{{ registration.firstName }}</td>
        <td>{{ registration.lastName }}</td>
        <td><a href="{{ url_for('.activate_user', username=registration.username)}}">Activate</a></td>
        <td><a href="{{ url_for('.remove_registration', username=registration.username) }}">Remove</a></td>
    </tr>
    {% endfor %}

</table>

<h2>Sensitive group activations</h2>

<h3>Persistent groups</h3>
<table class="table table-striped table-condensed">
    <tr>
        <th>Username</th>
        <th>Group</th>
        <th>Activate</th>
        <th>Reject</th>
    </tr>
    {% for user, group in persistent_group_join_requests %}
    <tr>
        <td>{{ user.username }}</td>
        <td>{{ group.name }}</td>
        <td><a href="{{ url_for('.approve_sensitive_persistent_group_participation_request', user_id=user.id, group_id=group.id) }}">Approve</a></td>
        <td><a href="{{ url_for('.reject_sensitive_persistent_group_participation_request', user_id=user.id, group_id=group.id) }}">Reject</a></td>
    </tr>
    {% endfor %}
</table>

<h3>Year groups</h3>
<table class="table table-striped table-condensed">
    <tr>
        <th>Username</th>
        <th>Group</th>
        <th>Year</th>
        <th>Activate</th>
        <th>Reject</th>
    </tr>
    {% for user, group, revue_year in year_group_join_requests %}
    <tr>
        <td>{{ user.username }}</td>
        <td>{{ group.name }}</td>
        <td>{{ revue_year.year }}</td>
        <td><a href="{{ url_for('.approve_sensitive_year_group_participation_request', user_id=user.id, revue_year_id=revue_year.id, group_id=group.id) }}">Approve</a></td>
        <td><a href="{{ url_for('.reject_sensitive_year_group_participation_request', user_id=user.id, revue_year_id=revue_year.id, group_id=group.id) }}">Reject</a></td>
    </tr>
    {% endfor %}
</table>

{% endblock %}
